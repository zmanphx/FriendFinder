<!DOCTYPE html>
<html lang="en">


    <head>
        <meta charset="UTF-8">
        <title>Survey</title>
      
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
      
    
    </head>

<body>
<div class="container">

<h1>Friend Finder Survey Questions</h1>
<hr>
<h3><strong>About You</strong></h3>

<h4>Name (Required)</h4>
<input type="text" id="survName" class="form-control" required>

<h4>Photo Link (Required)</h4>
<input type="text" id="survPhoto" class="form-control" required>
<br>
<h4><strong>Question 1</strong></h4>
<h4> "When out of the house and wanting to eat, I will eat fast-food " </h4>

<select class="chosen-select"  id="q1"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>
  <hr>
  <h4><strong>Question 2</strong></h4>
  <h4> "When I camp, I prefer a camper trailer over a tent " </h4>
  <select class="chosen-select"  id="q2"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree)</option>
 
  </select>


  <hr>
  <h4><strong>Question 3</strong></h4>
  <h4> "I think parents should discipline their mis-behaving kids when in public " </h4>
  <select class="chosen-select"  id="q3"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>

  <hr>
  <h4><strong>Question 4</strong></h4>
  <h4> "When a driver cuts me off in traffic, I feel little road-rage anger" </h4>
  <select class="chosen-select"  id="q4"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>
  
  <hr>
  <h4><strong>Question 5</strong></h4>
  <h4> "If the food I order at resturant is not up to my standards, I will complain to the waiter" </h4>
  <select class="chosen-select"  id="q5"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>

  <hr>
  <h4><strong>Question 6</strong></h4>
  <h4> "People talking during a movie in a theater annoy me" </h4>
  <select class="chosen-select"  id="q6"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>


  <hr>
  <h4><strong>Question 7</strong></h4>
  <h4> "I judge people by how they dress while shopping at Walmart" </h4>
  <select class="chosen-select"  id="q7"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>

  <hr>
  <h4><strong>Question 8</strong></h4>
  <h4> "If I like a song on the radio, I will sing-along even while driving" </h4>
  <select class="chosen-select"  id="q8"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>

  <hr>
  <h4><strong>Question 9</strong></h4>
  <h4> "If I chose where to live prefer to live in hot climate over freezing climate" </h4>
  <select class="chosen-select"  id="q9"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>

  <hr>
  <h4><strong>Question 10</strong></h4>
  <h4> "When I shop, I will buy something that is on sale when I didn't realy need it " </h4>
  <select class="chosen-select"  id="q10"  style="width:200px">
    <option></option>
    <option value="1">1 (strongly Dis-Agree)</option>
    <option value="2">2</option>
    <option value="3">3 (no opinion)</option>
    <option value="4">4</option>
    <option value="5">5 (strongly Agree) </option>
 
  </select>
  <br>
  <br>
  <br>
  <br>
  <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit" >Submit</button>
  <br>
  <br>
  <p> <a href="/api/friends"  id ="apiFriends">API Friends List</a>  <a href="https://github.com/zmanphx/FriendFinder.git"> | GitHub Repo</a> <a href="/home.html"> |  Home</a></p>
 

</div>
<div>

</div>


<div id="matchedModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Closest Match</h4>
        </div>
        <div class="modal-body">
          <p id ="yourmatch">Your closest match</p>
           <h4 id="matchName">   </h4>
           <img id="matchphoto" src="surprise.png" alt="surprise.png" " height="150" width="150">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
  
    </div>
  </div>

  
</body>
</body>


</html>
<script type="text/javascript">


$("#apiFriends").on("click", function(event){
// make ajax call to get friends json

$.ajax({ url: "/api/friends", method: "GET" })
      .then(function(result) {

        // Here we then log the waitlistData to console, where it will show up as an object.
        console.log(result);
       console.log("------------------------------------");
      
        
      });

    });

  $("#submit").on("click", function(event) {
    event.preventDefault();
    var complete= true;
    
    //make sure all questions are answered

    $(".chosen-select").each(function(){
       console.log("complete?")
        if($(this).val()===""){
         complete = false;
          
         $("#matchName").text("Survey Questions Incomplete!!");
         $("#yourmatch").text("Not all questions answered.");
           // show the modal.

           $("#matchedModal").modal('show');
         
         
         return complete;
   
        }
    });
   
    console.log("I am complete?")
    
    if (complete) {
    console.log("make friend");
        var newFriend = {
      name: $("#survName")
        .val()
        .trim(),
      photo: $("#survPhoto")
        .val()
        .trim(),
      scores: [
        $("#q1").val(),
        $("#q2").val(),
        $("#q3").val(),
        $("#q4").val(),
        $("#q5").val(),
        $("#q6").val(),
        $("#q7").val(),
        $("#q8").val(),
        $("#q9").val(),
        $("#q10").val()
      ]
    };
    console.log(newFriend);
  
    $.post("/api/survey",newFriend, function(data){
        // get response back of the match
        ///assign data coming back to the modal 
        console.log('making post'); 
        $("#matchName").text(data.name);
           $("#matchphoto").attr("src", data.photo);
           $("#yourmatch").text("Your closet match!");
           // show the modal.

           $("#matchedModal").modal('show');

    });

}


});



































</script>